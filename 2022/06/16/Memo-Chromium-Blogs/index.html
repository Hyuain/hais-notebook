<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/hais-notebook/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/hais-notebook/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/hais-notebook/images/favicon-16x16.png">
  <link rel="mask-icon" href="/hais-notebook/images/safari-pinned-tab.svg" color="#222">

<link rel="stylesheet" href="/hais-notebook/css/main.css">



<link rel="stylesheet" href="/hais-notebook/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"hyuain.github.io","root":"/hais-notebook/","images":"/hais-notebook/images","scheme":"Gemini","darkmode":false,"version":"8.12.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac","show_result":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/hais-notebook/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/hais-notebook/js/config.js"></script>

    <meta name="description" content="Read some articles in chromium blogs or relative wikis, and take these memos.">
<meta property="og:type" content="article">
<meta property="og:title" content="Topics From Chromium Blogs">
<meta property="og:url" content="https://hyuain.github.io/hais-notebook/2022/06/16/Memo-Chromium-Blogs/index.html">
<meta property="og:site_name" content="Hais Notebook">
<meta property="og:description" content="Read some articles in chromium blogs or relative wikis, and take these memos.">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-06-16T10:30:50.000Z">
<meta property="article:modified_time" content="2022-06-16T10:30:50.000Z">
<meta property="article:author" content="Harvey Zhang">
<meta property="article:tag" content="Chromium">
<meta property="article:tag" content="Blogs">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://hyuain.github.io/hais-notebook/2022/06/16/Memo-Chromium-Blogs/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://hyuain.github.io/hais-notebook/2022/06/16/Memo-Chromium-Blogs/","path":"2022/06/16/Memo-Chromium-Blogs/","title":"Topics From Chromium Blogs"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Topics From Chromium Blogs | Hais Notebook</title>
  





  <noscript>
    <link rel="stylesheet" href="/hais-notebook/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/hais-notebook/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Hais Notebook</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/hais-notebook/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/hais-notebook/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/hais-notebook/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/hais-notebook/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#architecture"><span class="nav-number">1.</span> <span class="nav-text">Architecture</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#multi-process-architecture"><span class="nav-number">1.1.</span> <span class="nav-text">Multi-process Architecture</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#security"><span class="nav-number">2.</span> <span class="nav-text">Security</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#javascript"><span class="nav-number">3.</span> <span class="nav-text">JavaScript</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#jit-just-in-time-compilation"><span class="nav-number">3.1.</span> <span class="nav-text">JIT: Just-in-time compilation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#garbage-collection"><span class="nav-number">3.2.</span> <span class="nav-text">Garbage Collection</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#generational-garbage-collection"><span class="nav-number">3.2.1.</span> <span class="nav-text">Generational Garbage Collection</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Harvey Zhang</p>
  <div class="site-description" itemprop="description">海鲜酱的笔记本</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/hais-notebook/archives/">
          <span class="site-state-item-count">61</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/hais-notebook/categories/">
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/hais-notebook/tags/">
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://hyuain.github.io/hais-notebook/2022/06/16/Memo-Chromium-Blogs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hais-notebook/images/avatar.gif">
      <meta itemprop="name" content="Harvey Zhang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hais Notebook">
      <meta itemprop="description" content="海鲜酱的笔记本">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Topics From Chromium Blogs | Hais Notebook">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Topics From Chromium Blogs
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-06-16 10:30:50" itemprop="dateCreated datePublished" datetime="2022-06-16T10:30:50+00:00">2022-06-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/hais-notebook/categories/Memo/" itemprop="url" rel="index"><span itemprop="name">Memo</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>Read some articles in chromium blogs or relative wikis, and take these memos.</p>
<span id="more"></span>
<h1 id="architecture">Architecture</h1>
<h2 id="multi-process-architecture">Multi-process Architecture</h2>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.chromium.org/2008/09/multi-process-architecture.html">Multi-process Architecture</a> - Thursday, September 11, 2008</p>
</blockquote>
<ol type="1">
<li>Three different types of processes: browser, renderers, and plug-ins.
<ol type="1">
<li><em>Browser</em>. There's only <strong>one</strong> browser process, which manages the tabs, windows, and "chrome" of the browser. This process also handles all interactions with the disk, network, user input, and display, but it makes no attempt to parse or render any content from the web.</li>
<li><em>Renderers</em>. The browser process creates <strong>many</strong> renderer processes, each responsible for rendering web pages. The renderer processes contain all the complex logic for handling HTML, JavaScript, CSS, images, and so on. We achieve this using the open source WebKit rendering engine, which is also used by Apple's Safari web browser. Each renderer process is run in a sandbox, which means it has almost <strong>no direct access to your disk, network, or display</strong>. <strong>All interactions with web apps, including user input events and screen painting, must go through the browser process.</strong> This lets the browser process monitor the renderers for suspicious activity, killing them if it suspects an exploit has occurred.</li>
<li><em>Plug-ins</em>. The browser process also creates <strong>one process for each type of plug-in that is in use</strong>, such as Flash, Quicktime, or Adobe Reader. These processes just contain the plug-ins themselves, along with some glue code to let them interact with the browser and renderers.</li>
</ol></li>
<li>Create browser process -&gt; Create one renderer process for each instance of a web site you visit.</li>
<li>You can think of this as using <strong>a different process for each tab in the browser</strong>, but <strong>allowing two tabs to share a process</strong> if they are related to each other and are showing the same site.</li>
</ol>
<h1 id="security">Security</h1>
<h1 id="javascript">JavaScript</h1>
<h2 id="jit-just-in-time-compilation">JIT: Just-in-time compilation</h2>
<blockquote>
<p>V8 uses <a target="_blank" rel="noopener" href="https://v8.dev/blog/turbofan-jit">TurboFan JIT</a>.</p>
</blockquote>
<ol type="1">
<li>Introduction:
<ol type="1">
<li>JIT is a way of executing computer code that involves compilation <strong>during execution of a program</strong> (at <strong>run time</strong>) rather than before execution.</li>
<li>This may consist of <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Source_code">source code</a> translation but is more commonly <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Bytecode">bytecode</a> translation to <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Machine_code">machine code</a>, which is then executed directly.</li>
<li>JIT compilation is a combination of the two traditional approaches to translation to machine code—<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Ahead-of-time_compilation">ahead-of-time compilation</a> (AOT), and <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Interpreter_(computing)">interpretation</a>—and combines some advantages and drawbacks of both.</li>
<li>Roughly, JIT compilation combines <strong>the speed of compiled code</strong> with <strong>the flexibility of interpretation</strong>, with <strong>the overhead of an interpreter</strong> and <strong>the additional overhead of compiling and <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Linker_(computing)">linking</a></strong> (not just interpreting).</li>
</ol></li>
<li>Design:
<ol type="1">
<li>Source code is translated to an intermediate representation known as <strong>bytecode</strong>.</li>
<li><strong>Bytecode</strong> is not the machine code for any particular computer, and may be portable among computer architectures. The <strong>bytecode</strong> may then be <strong>interpreted</strong> by, or run on <strong>a virtual machine</strong>.</li>
<li>Traditional <strong>interpreted virtual machine</strong> vs. <strong>JIT</strong>
<ol type="1">
<li>The traditional <strong>interpreted virtual machine</strong>: simply <strong>interpret the bytecode</strong>, generally with much lower performance.</li>
<li><strong>The JIT compiler</strong>: reads the bytecodes in many sections (or in full, rarely) and <strong>compiles</strong> them dynamically <strong>into machine code</strong> so the program can run faster. This can be done per-file, per-function or even on any arbitrary code fragment; the code can be compiled when it is about to be executed (hence the name "just-in-time"), and then <strong>cached and reused</strong> later without needing to be recompiled.</li>
</ol></li>
<li>Because a JIT must render and execute a native binary image at runtime, true machine-code JITs necessitate platforms that allow for data to be executed at runtime, making using such JITs on a <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Harvard_architecture">Harvard architecture</a>-based machine impossible; the same can be said for certain operating systems and virtual machines as well.</li>
</ol></li>
<li>Startup time delay or warm-up time: the time taken to load and compile the bytecode. The more optimization JIT performs, the better the code it will generate, but the initial delay will also increase.</li>
</ol>
<h2 id="garbage-collection">Garbage Collection</h2>
<blockquote>
<p>V8 uses a generational garbage collector with the Javascript heap split into a small young generation for newly allocated objects and a large old generation for long living objects. see <a target="_blank" rel="noopener" href="https://v8.dev/blog/free-garbage-collection">this blog</a>.</p>
</blockquote>
<p>There are several kinds of garbage collection:</p>
<ol type="1">
<li>Tracing garbage collection
<ol type="1">
<li>Based on <strong>reachability</strong> (An object is <em>reachable</em> if it is referred to by a root, or is referred to by a reachable object; that is, if it can be reached from the roots by following references.</li>
<li>If an object is <strong>not reachable</strong>, there is no way the mutator could ever access it, and therefore it <strong>cannot be live</strong>.</li>
<li>In each collection cycle, some or all of the objects are condemned (those objects are candidates for recycling), and the graph is traced to find which of the condemned objects are reachable. Those that were not reachable may be reclaimed.</li>
<li>Typical strategies:
<ol type="1">
<li>Copying garbage collection: relocate reachable objects, and then reclaim objects are left behind.</li>
<li>Generational garbage collection: see next part.</li>
</ol></li>
</ol></li>
<li>Reference counting</li>
</ol>
<h3 id="generational-garbage-collection">Generational Garbage Collection</h3>
<blockquote>
<p>See <a target="_blank" rel="noopener" href="https://www.memorymanagement.org/glossary/g.html#term-generational-garbage-collection">this website</a>.</p>
</blockquote>
<ol type="1">
<li>Generational garbage collection is <strong>tracing garbage collection</strong> that makes use of the <strong>generational hypothesis</strong>.</li>
<li><strong>Objects</strong> (object is a contiguous block of memory forming a single logical structure, objects are the units of allocation, deallocation, etc.) are <strong>gathered</strong> together <strong>in generations</strong>. New objects are allocated in the <em>youngest</em> or <em>nursery</em> generation, and <a target="_blank" rel="noopener" href="https://www.memorymanagement.org/glossary/p.html#term-promotion">promoted</a> to <em>older</em> generations if they survive. Objects in older generations are <a target="_blank" rel="noopener" href="https://www.memorymanagement.org/glossary/c.html#term-condemned-set">condemned</a> less frequently, saving CPU time.</li>
</ol>
<p>It is typically rare for an object to refer to a younger object. Hence, objects in one generation typically have few <a target="_blank" rel="noopener" href="https://www.memorymanagement.org/glossary/r.html#term-reference">references</a> to objects in younger generations. This means that the <a target="_blank" rel="noopener" href="https://www.memorymanagement.org/glossary/s.html#term-scan">scanning</a> of old generations in the course of collecting younger generations can be done more efficiently by means of <a target="_blank" rel="noopener" href="https://www.memorymanagement.org/glossary/r.html#term-remembered-set">remembered sets</a>.</p>
<p>In some purely functional languages (that is, without update), all references are backwards in time, in which case remembered sets are unnecessary.</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/hais-notebook/tags/Chromium/" rel="tag"># Chromium</a>
              <a href="/hais-notebook/tags/Blogs/" rel="tag"># Blogs</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/hais-notebook/2022/05/29/Operations-Linux/" rel="prev" title="Linux">
                  <i class="fa fa-chevron-left"></i> Linux
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Harvey Zhang</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="/hais-notebook/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/hais-notebook/js/comments.js"></script><script src="/hais-notebook/js/utils.js"></script><script src="/hais-notebook/js/next-boot.js"></script>

  
<script src="/hais-notebook/lib/hexo-generator-searchdb/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/hais-notebook/js/third-party/search/local-search.js"></script>





  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"/hais-notebook/lib/mathjax/es5/tex-mml-chtml.js","integrity":"sha256-hlC2uSQYTmPsrzGZTEQEg9PZ1a/+SV6VBCTclohf2og="}}</script>
<script src="/hais-notebook/js/third-party/math/mathjax.js"></script>



</body>
</html>
